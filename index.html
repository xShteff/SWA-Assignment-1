<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <title>SWA Assignment</title>
</head>

<body>
    <div class="container">
        <table id="data" class="table table-sm table-striped table-inverse">
            <thead>
                <tr>
                    <th>
                        Image
                    </th>
                    <th>
                        Name
                    </th>
                    <th>
                        Phone Number
                    </th>
                    <th>
                        E-Mail
                    </th>
                    <th>
                        Address
                    </th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</body>
<script>
    class Person {
        constructor(name, email, phone, address, picture) {
            this.name = name;
            this.email = email;
            this.phone = phone;
            this.address = address;
            this.picture = picture;
        }
    }

    var resultToData = function(r) {
        var name = new Name(r.name.first, r.name.last);
        var location = new Location(r.location.city, r.location.postcode, r.location.state, r.location.street);
        var person = new Person(name, r.email, r.phone, location, r.picture.large);

        return person;
    }

    class Name {
        constructor(firstname, lastname) {
            this.firstname = firstname;
            this.lastname = lastname;
        }

        toString() {
            return `${this.firstname.charAt(0).toUpperCase() + this.firstname.slice(1)} ${this.lastname.charAt(0).toUpperCase() + this.lastname.slice(1)}`;
        }
    }

    class Location {
        constructor(city, postcode, state, street) {
            this.city = city;
            this.postcode = postcode;
            this.state = state;
            this.street = street;
        }

        toString() {
            return `${this.postcode}, ${this.city}, ${this.state}, ${this.street}`;
        }
    }

    class Table {
        constructor() {
            this.data = [];
        }
        initData() {
            var self = this;
            $.ajax({
                url: 'https://randomuser.me/api/?nat=dk&inc=name,phone,email,location,picture&results=20',
                dataType: 'json',
                success: function(r) {
                    self.data = r.results.map(resultToData);

                    self.initTable();
                }
            });
        }
        initTable() {
            var self = this;
            for (var i = 0; i < this.data.length; i++) {
                var tr = $("<tr>");
                var img = $("<img>").attr({
                    'src': this.data[i].picture
                }).css({
                    'height': '50px'
                });
                var td0 = $("<td>").append(img);
                var td1 = $("<td>").text(this.data[i].name.toString());
                var td2 = $("<td>").text(this.data[i].phone);
                var td3 = $("<td>").text(this.data[i].email);
                var td4 = $("<td>").text(this.data[i].address);
                tr.append(td0).append(td1).append(td2).append(td3).append(td4);
                $('#data tbody').append(tr);
            }
        }
    }

    var x = new Table();
    x.initData();
</script>

</html>